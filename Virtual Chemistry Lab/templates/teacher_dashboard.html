<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!-- Add this after <body> -->
<header>
  <div class="header-container">
    <img src="images/labman.png" alt="Labman" class="labman-logo">
    <h1>Virtual Chemistry Lab</h1>
  </div>
  <nav>
    <a href="templates/index.html">Home</a>
    <a href="Login/register_teacher.html">Register as Teacher</a>
    <a href="Login/register_student.html">Register as Student</a>
  </nav>
</header>
<style>
  .header-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    flex-wrap: wrap;
    margin-bottom: 10px;
  }
  .labman-logo {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    object-fit: cover;
    box-shadow: 0 0 10px rgba(255,255,255,0.3);
  }
  header h1 {
    font-size: 2.4em;
    font-family: 'Playfair Display', serif;
    color: #fff;
    margin: 0;
  }
  header {
    background: linear-gradient(to right, #1e3c72, #2a5298);
    padding: 25px 20px 10px 20px;
    text-align: center;
    color: white;
    top: 0;
    z-index: 1000;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    margin-bottom: 20px;
  }
  nav {
    margin-top: 10px;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
  }
  nav a {
    text-decoration: none;
    color: #ffffff;
    padding: 8px 16px;
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    transition: all 0.3s ease-in-out;
    font-weight: 500;
  }
  nav a:hover {
    background-color: rgba(255, 255, 255, 0.3);
  }
  .dropdown {
    position: relative;
    display: inline-block;
  }
  .dropbtn {
    cursor: pointer;
  }
  .dropdown-content {
    display: none;
    position: absolute;
    background: #fff;
    min-width: 180px;
    box-shadow: 0 8px 16px rgba(0,0,0,0.12);
    z-index: 1;
    border-radius: 8px;
    margin-top: 6px;
  }
  .dropdown-content a {
    color: #0d47a1;
    padding: 10px 18px;
    text-decoration: none;
    display: block;
    background: none;
    border-radius: 0;
    font-weight: 500;
  }
  .dropdown-content a:hover {
    background: #e3f2fd;
  }
  .dropdown:hover .dropdown-content {
    display: block;
  }
</style>
  <title>Teacher Dashboard - Virtual Chemistry Lab</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    .dashboard-container { max-width: 900px; margin: 40px auto; background: #fff; border-radius: 12px; box-shadow: 0 4px 24px #b3c6e0; padding: 32px; }
    h2 { color: #0d47a1; }
    .section { margin-bottom: 32px; }
    label, select, input, button { margin: 8px 0; }
    table { width: 100%; border-collapse: collapse; margin-top: 16px; }
    th, td { border: 1px solid #b3c6e0; padding: 8px; text-align: left; }
    th { background: #e3f2fd; }
    .assign-btn { background: #1976d2; color: #fff; border: none; border-radius: 4px; padding: 6px 16px; cursor: pointer; }
    .assign-btn:hover { background: #0d47a1; }
  </style>
</head>
<body>
   <header>
    <div class="header-container">
     <img src="../assets/labman.png" alt="Labman" class="labman-logo">
      <h1>Virtual Chemistry Lab</h1>
    </div>
   <nav>
  <a href="index.html">Home</a>
  <a href="../Login/register_teacher.html">Register as Teacher</a>
  <a href="../Login/register_student.html">Register as Student</a>
  </div>
</nav>
</header>

  <div class="dashboard-container">
    <h2 style="color:#0d47a1; margin-bottom:24px; text-align:center;">üë®‚Äçüè´ Teacher Dashboard</h2>

    <!-- Section 1: Add Student Info -->
    <div class="section">
      <h3>Add Student Information</h3>
      <form id="student-info-form">
        <label>Student Email:
          <input type="email" id="student-info-email" required />
        </label>
        <label>Registration Number:
          <input type="text" id="student-info-regno" required />
        </label>
        <button type="submit" class="assign-btn">Add Student</button>
      </form>
      <div id="student-info-status" class="status-msg"></div>
      <div id="student-list"></div>
    </div>

    <!-- Section 2: Assign Quiz/Experiment -->
    <div class="section">
      <h3>Assign Quiz or Experiment</h3>
      <form id="assign-form">
        <label>Student Email: <input type="email" id="Class" required /></label><br/>
        <label>Experiment Name: <input type="text" id="experiment-name" required /></label><br/>
        <label>Instructions: <input type="text" id="experiment-instructions" required /></label><br/>
        <button type="submit" class="assign-btn">Assign Experiment</button>
      </form>
      <div id="assign-status" class="status-msg"></div>
    </div>

    <!-- Section 3: Evaluate Assigned Quiz/Experiment -->
    <div class="section">
      <h3>Evaluate Assigned Quiz/Experiment</h3>
      <table id="assigned-table">
        <thead>
          <tr>
            <th>Student</th>
            <th>Type</th>
            <th>Title/Name</th>
            <th>Instructions/Link</th>
            <th>Result/Submission</th>
            <th>Evaluate</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
  <script>
    // --- Student Info Section ---
    function getStudents() {
      return JSON.parse(localStorage.getItem('students') || '[]');
    }
    function setStudents(students) {
      localStorage.setItem('students', JSON.stringify(students));
    }
    function loadStudents() {
      const students = getStudents();
      const div = document.getElementById('student-list');
      if (students.length === 0) {
        div.innerHTML = "<i>No students added yet.</i>";
        return;
      }
      div.innerHTML = "<b>Students:</b><ul style='margin:8px 0 0 16px;'>";
      students.forEach(s => {
        div.innerHTML += `<li>${s.email} (${s.regno})</li>`;
      });
      div.innerHTML += "</ul>";
    }
    document.getElementById('student-info-form').onsubmit = function(e) {
      e.preventDefault();
      const email = document.getElementById('student-info-email').value;
      const regno = document.getElementById('student-info-regno').value;
      const students = getStudents();
      if (students.some(s => s.email === email)) {
        document.getElementById('student-info-status').textContent = 'Student already exists!';
        return;
      }
      students.push({ email, regno });
      setStudents(students);
      document.getElementById('student-info-status').textContent = 'Student added!';
      loadStudents();
      this.reset();
    };
    loadStudents();

    // --- Assignment Section ---
    function getAssignments() {
      return JSON.parse(localStorage.getItem('assignments') || '[]');
    }
    function setAssignments(assignments) {
      localStorage.setItem('assignments', JSON.stringify(assignments));
    }
    document.getElementById('assignment-type').onchange = function() {
      if (this.value === 'experiment') {
        document.getElementById('experiment-fields').style.display = '';
        document.getElementById('quiz-fields').style.display = 'none';
      } else {
        document.getElementById('experiment-fields').style.display = 'none';
        document.getElementById('quiz-fields').style.display = '';
      }
    };
    document.getElementById('assign-form').onsubmit = function(e) {
      e.preventDefault();
      const student_email = document.getElementById('assign-student-email').value;
      const type = document.getElementById('assignment-type').value;
      let assignment = { id: Date.now().toString(), student_email, type, result: null };
      if (type === 'experiment') {
        assignment.name = document.getElementById('experiment-name').value;
        assignment.instructions = document.getElementById('experiment-instructions').value;
      } else {
        assignment.title = document.getElementById('quiz-title').value;
        assignment.link = document.getElementById('quiz-link').value;
      }
      const assignments = getAssignments();
      assignments.push(assignment);
      setAssignments(assignments);
      document.getElementById('assign-status').textContent = 'Assigned!';
      loadAssignments();
      this.reset();
      document.getElementById('experiment-fields').style.display = '';
      document.getElementById('quiz-fields').style.display = 'none';
    };

    // --- Evaluation Section ---
    // --- Evaluation Section ---
    function loadAssignments() {
  const assignments = getAssignments();
  const tbody = document.querySelector('#assigned-table tbody');
  tbody.innerHTML = '';
  assignments.forEach(a => {
    let title = a.type === 'experiment' ? a.name : a.title;
    let info = a.type === 'experiment' ? a.instructions : `<a href="${a.link}" target="_blank">Quiz Link</a>`;
    let submission = a.submission || '';
    let result = a.result || '';
    let evalBtn = (a.submission && !a.result) ? `<button class="eval-btn" data-id="${a.id}">Evaluate</button>` : '';
    tbody.innerHTML += `<tr>
      <td>${a.student_email}</td>
      <td>${a.type.charAt(0).toUpperCase() + a.type.slice(1)}</td>
      <td>${title}</td>
      <td>${info}</td>
      <td>${submission}</td>
      <td>${result || evalBtn}</td>
    </tr>`;
  });
}
loadAssignments();

// Event delegation for Evaluate buttons
document.querySelector('#assigned-table tbody').addEventListener('click', function(e) {
  if (e.target.classList.contains('eval-btn')) {
    const id = e.target.getAttribute('data-id');
    const result = prompt('Enter evaluation/grade/feedback:');
    if (!result) return;
    const assignments = getAssignments();
    const idx = assignments.findIndex(a => a.id === id);
    if (idx !== -1) {
      assignments[idx].result = result;
      setAssignments(assignments);
      loadAssignments();
    }
  }
});
  </script>
</body>
</html>